<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tebak Gambar Hewan</title>
    <link href="/dist/output.css" rel="stylesheet" />
  </head>
  <body class="bg-gray-200 p-4">
    <div class="container mx-auto bg-white p-6 rounded-lg shadow-lg">
      <h1 class="text-2xl font-bold mb-4">Tebak Gambar Hewan</h1>
      <div class="mb-4">
        <img
          id="gambarHewan"
          src="kuda.jpg"
          alt="Gambar Hewan"
          class="w-64 h-64 object-cover mx-auto"
        />
      </div>
      <div class="mb-4">
        <input
          type="text"
          id="jawaban"
          class="w-full p-2 border rounded-md"
          placeholder="Tebak Nama Hewan"
        />
      </div>
      <button
        id="cekJawaban"
        class="bg-blue-500 text-white px-4 py-2 rounded-md"
      >
        Cek Jawaban
      </button>
      <button
        id="mulaiLagi"
        class="bg-green-500 text-white px-4 py-2 rounded-md"
        style="display: none"
      >
        Mulai Lagi
      </button>
      <button
        id="keluar"
        class="bg-red-500 text-white px-4 py-2 rounded-md"
        style="display: none"
      >
        Keluar
      </button>
      <p id="hasilJawaban" class="mt-4 text-green-500 font-bold"></p>
      <p id="waktuTersisa" class="mt-4 text-red-500 font-bold">
        Waktu Tersisa: 10 detik
      </p>
    </div>

    <script>
      const gambarHewan = document.getElementById("gambarHewan");
      const jawabanInput = document.getElementById("jawaban");
      const cekJawabanButton = document.getElementById("cekJawaban");
      const mulaiLagiButton = document.getElementById("mulaiLagi");
      const hasilJawaban = document.getElementById("hasilJawaban");
      const waktuTersisa = document.getElementById("waktuTersisa");
      const keluar = document.getElementById("keluar");

      let timer;
      let waktuMulai = 10; // Waktu mulai dalam detik
      let waktuHabis = false;
      let jawabanBenarDimasukkan = false;

      // Daftar gambar hewan dan jawaban yang sesuai
      const gambarHewanList = [
        "img/kuda.jpg",
        "img/anjing.jpg",
        "img/kucing.jpg",
        "img/gajah.jpg",
        "img/gecko.jpg",
        "img/clownfish.jpeg"
      ];
      const jawabanBenarList = ["kuda", "anjing", "kucing", "gajah", "gecko", "ikan badut"];

      // Menampilkan gambar hewan secara acak
      let currentIndex = 0;

      function tampilkanGambarAcak() {
        currentIndex = Math.floor(Math.random() * gambarHewanList.length); // Pilih gambar secara acak
        gambarHewan.src = gambarHewanList[currentIndex];
        jawabanInput.value = "";
        hasilJawaban.textContent = "";
        waktuMulai = 10; // Mengatur ulang waktu mulai ke 10 detik
        updateWaktuTersisa();
        waktuHabis = false;
        jawabanBenarDimasukkan = false;
        mulaiTimer();
        jawabanInput.disabled = false; // Mengaktifkan kembali input
        jawabanInput.focus();
      }

      function mulaiTimer() {
        timer = setInterval(function () {
          waktuMulai--;
          updateWaktuTersisa();
          if (waktuMulai <= 0) {
            clearInterval(timer);
            waktuTersisa.textContent = "Waktu Habis";
            waktuHabis = true;
            cekJawabanButton.disabled = true;
            mulaiLagiButton.style.display = "inline-block";
            keluar.style.display = "inline-block";

            // Mematikan input jika jawaban benar
            if (jawabanBenarDimasukkan) {
              jawabanInput.disabled = true;
            }
          }
        }, 1000);
      }

      function updateWaktuTersisa() {
        waktuTersisa.textContent = `Waktu Tersisa: ${waktuMulai} detik`;
      }

      // Fokuskan input saat permainan dimulai
      jawabanInput.focus();

      // Memeriksa jawaban saat tombol "Enter" ditekan
      jawabanInput.addEventListener("keydown", (event) => {
        if (event.key === "Enter") {
          cekJawaban();
        }
      });

      // Memeriksa jawaban saat tombol "Cek Jawaban" ditekan
      cekJawabanButton.addEventListener("click", () => {
        cekJawaban();
      });

      function cekJawaban() {
        if (waktuHabis) {
          return; // Jangan memproses jawaban jika waktu sudah habis
        }

        const jawaban = jawabanInput.value.toLowerCase().trim();
        if (jawaban === jawabanBenarList[currentIndex]) {
          clearInterval(timer);
          hasilJawaban.textContent = "Jawaban Benar!";
          cekJawabanButton.disabled = true;
          mulaiLagiButton.style.display = "inline-block";
          jawabanInput.disabled = true;
          jawabanBenarDimasukkan = true;
          keluar.style.display = "inline-block";
        } else {
          hasilJawaban.textContent = "Jawaban Salah. Coba lagi.";
        }
        waktuTersisa.textContent = "";
      }

      mulaiLagiButton.addEventListener("click", () => {
        tampilkanGambarAcak();
        cekJawabanButton.disabled = false;
        mulaiLagiButton.style.display = "none";
      });

      keluar.addEventListener("click", () => {
        window.location.href = "/game/";
      });

      // Saat memuat halaman, tampilkan gambar pertama

      window.onload = function () {
        let timerInterval;
        Swal.fire({
          title: "Game Akan dimulai!",
          html: "Dalam waktu <b></b> detik.",
          timer: 3000,
          allowOutsideClick: false,
          timerProgressBar: true,
          didOpen: () => {
            Swal.showLoading();
            const b = Swal.getHtmlContainer().querySelector("b");
            timerInterval = setInterval(() => {
              const secondsLeft = Math.ceil(Swal.getTimerLeft() / 1000); // Remove decimal part
              b.textContent = `${secondsLeft}`;
            }, 100);
          },
          willClose: () => {
            clearInterval(timerInterval);
            tampilkanGambarAcak();
          },
        });
      };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </body>
</html>
